"use strict";(self.webpackChunkreach=self.webpackChunkreach||[]).push([[8034],{88034:(e,s,r)=>{r.r(s),r.d(s,{default:()=>g});var o=r(65043),t=r(73216),a=r(39374),n=r(24858),i=r(79061),c=r(49418);const d=r(15526).l.injectEndpoints({endpoints:e=>({resetPassword:e.mutation({query:e=>({url:"/resetPassword",method:"POST",body:{...e}})}),checkTokenExists:e.mutation({query:e=>({url:"/checkTokenExists",method:"POST",body:e})})}),overrideExisting:!0}),{useResetPasswordMutation:l,useCheckTokenExistsMutation:u}=d;var p=r(83910),m=r(32916),f=r(30064),w=r.n(f),h=r(70579);const x=()=>{const[e,s]=(0,o.useState)(!1),[d,f]=(0,o.useState)(!1),[x,g]=(0,o.useState)(!1),[j,k]=(0,o.useState)(!1),b=(0,t.zy)(),v=(0,t.Zp)(),[N,S]=(0,o.useState)(null);(0,o.useEffect)((()=>{const e=new URLSearchParams(b.search).get("token");e&&S(e)}),[b]);const y=(0,n.mN)(),{register:C,control:P,handleSubmit:E,formState:T,watch:q}=y,{errors:R}=T,[B,_]=(0,o.useState)(""),[A,O]=(0,o.useState)(""),[U]=l(),[F]=u(),[L,M]=(0,o.useState)(!1),[z,D]=(0,o.useState)(!1);(0,o.useEffect)((()=>{N&&(async()=>{D(!0);const e={token:N};"error"in await F(e)?(D(!1),w().fire({title:"Token Expired!",text:"",icon:"warning",timer:3e3,showConfirmButton:!1,backdrop:"\n      rgba(255, 255, 255, 0.5)\n      left top\n      no-repeat\n      filter: blur(5px);\n    ",background:"#fff"}),setTimeout((()=>{v("/")}),3e3)):D(!1)})()}),[N]);return(0,h.jsxs)("div",{className:"reset-password",children:[(0,h.jsx)(a.D,{children:"Reset Password"}),(0,h.jsx)("p",{className:"text-para",children:"Reset your password"}),(0,h.jsx)("div",{className:"content-box",children:(0,h.jsx)(n.Op,{...y,children:(0,h.jsxs)("form",{className:"login-field",onSubmit:E((async e=>{e.token=N,D(!0);const s=await U(e);if("error"in s){if(console.error("Error logging in:",s.error),"string"===typeof s.error)_(s.error);else{const e=s.error;e.data&&"object"===typeof e.data&&"error"in e.data&&"string"===typeof e.data.error?_(e.data.error):_("An error occurred")}O(""),D(!1)}else _(""),M(!0),D(!1),w().fire({title:"Password Reset!",text:"Your password has been changed successfully. Use your new password to sign in.",icon:"success",timer:3e3,showConfirmButton:!1,backdrop:"\n      rgba(255, 255, 255, 0.5)\n      left top\n      no-repeat\n      filter: blur(5px);\n    ",background:"#fff"}),setTimeout((()=>{v("/")}),3e3)})),noValidate:!0,children:[(0,h.jsxs)("div",{className:"password-area position-relative ".concat(x?"focused":""),onFocus:()=>g(!0),onBlur:()=>g(!1),children:[(0,h.jsx)(c.A,{name:"new_password",placeholder:"New Password",type:e?"text":"password",registerConfig:{required:{value:!0,message:"New password is required"}},className:"input-block"}),(0,h.jsx)("div",{className:"icon",onClick:()=>s((e=>!e)),children:(0,h.jsx)(p.g,{icon:e?m.pS3:m.k6j})})]}),(0,h.jsxs)("div",{className:"password-area position-relative ".concat(j?"ConfirmPasswordfocused":""),onFocus:()=>k(!0),onBlur:()=>k(!1),children:[(0,h.jsx)(c.A,{name:"new_password_confirmation",placeholder:"Confirm Password",type:d?"text":"password",registerConfig:{required:{value:!0,message:"Confirm password is required"},validate:e=>{if(q("new_password")!=e)return"Passwords do not match"}},className:"input-block"}),(0,h.jsx)("div",{className:"icon",onClick:()=>f((e=>!e)),children:(0,h.jsx)(p.g,{icon:d?m.pS3:m.k6j})})]}),(0,h.jsx)("div",{className:"error",children:B}),z?(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"page-loader",children:(0,h.jsx)("div",{className:"page-innerLoader",children:(0,h.jsx)("div",{className:"spinner-border",role:"status",children:(0,h.jsx)("img",{src:r(27951),alt:"",className:"img-fluid"})})})})}):"",(0,h.jsx)(i.$,{onClick:()=>console.log("Hello"),text:"Update Password",icon:!0,theme:"light",className:"w-100"})]})})})]})};const g=function(){return(0,h.jsx)("div",{className:"row mx-0",children:(0,h.jsx)(x,{})})}}}]);
//# sourceMappingURL=8034.6cb66bf2.chunk.js.map