"use strict";(self.webpackChunkreach=self.webpackChunkreach||[]).push([[1015],{43081:(e,s,i)=>{i.d(s,{f:()=>x});var n=i(65043),t=i(92382),o=(i(4430),i(69078),i(83910)),a=i(97929),l=i(5701),c=i(20782),r=i(10591),d=i(39374),m=i(1043),u=i.n(m),g=i(73216),h=i(35475),p=i(70579);const x=(0,n.forwardRef)(((e,s)=>{const{settings:i,items:m,className:x,isVideo:v}=e,[j,_]=(0,n.useState)(!1),[f,b]=(0,n.useState)(void 0),[N,y]=(0,n.useState)(void 0),[w,k]=(0,n.useState)(void 0),A=()=>{_(!j)},C=(e,s)=>{b(e),y(s),A()},M=(0,g.Zp)();return(0,p.jsxs)("div",{className:"custom-slider-wrapper action-up-arrow",children:[(0,p.jsx)(t.A,{ref:s,...i,className:x,children:m&&m.map(((s,i)=>(0,p.jsxs)("div",{className:"item cursor-pointer ".concat(null!==s&&void 0!==s&&s.active?"chat-slider-active":""),onClick:()=>{e.clickCallback&&s.room_id&&e.clickCallback(s.room_id)},children:[v?(0,p.jsx)("div",{className:"video-wrapper",children:s.thumbnail?(0,p.jsxs)("div",{className:"image-wrap",children:[(0,p.jsx)("img",{src:s.thumbnail,alt:null===s||void 0===s?void 0:s.alt,className:"img-fluid"}),(0,p.jsx)("a",{className:"play-button",onClick:()=>C(s.video,s.title),children:(0,p.jsx)(o.g,{icon:a.ijD})})]}):(0,p.jsxs)("div",{children:[(0,p.jsx)("video",{className:"w-100",controls:!1,playsInline:!0,src:s.video}),(0,p.jsx)("a",{className:"play-button",onClick:()=>C(s.video,s.title),children:(0,p.jsx)(o.g,{icon:a.ijD})})]})}):s.isLink&&s.url?(0,p.jsx)(h.N_,{to:s.url,className:null!==s&&void 0!==s&&s.active?"active":"",children:(0,p.jsx)("img",{src:s.image,alt:null===s||void 0===s?void 0:s.alt,className:"img-fluid"})}):(0,p.jsx)("a",{onClick:()=>M("/chandlery",{state:{chandlery_id:s.partner_id}}),target:"_blank",className:null!==s&&void 0!==s&&s.active?"active":"",children:(0,p.jsx)("img",{src:s.image,alt:null===s||void 0===s?void 0:s.alt,className:"img-fluid"})}),s.title&&(0,p.jsx)("h6",{className:"itemlist-heading",children:s.title}),s.text&&(0,p.jsx)("p",{className:"item-text",children:s.text}),s.details&&(0,p.jsx)("p",{className:"item-details",children:s.details})]},"slide-".concat(i))))}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)(l.A,{isOpen:j,toggle:A,centered:!0,className:"videobox-modal",children:(0,p.jsxs)(c.A,{children:[(0,p.jsx)(r.A,{toggle:A,children:(0,p.jsx)(d.D,{tag:"h3",className:"text-center",children:N})}),(0,p.jsx)("div",{className:"video-player",children:(0,p.jsx)(u(),{url:f,controls:!0})})]})})})]})}))},11015:(e,s,i)=>{i.r(s),i.d(s,{default:()=>M});var n=i(57167),t=i(65043),o=i(83910),a=i(97929),l=i(70579);const c=e=>{let{onSearch:s}=e;const[i,n]=(0,t.useState)("");return(0,l.jsxs)("form",{children:[(0,l.jsx)("input",{type:"text",value:i,onChange:e=>{n(e.target.value),s&&s(e.target.value)},placeholder:"Search Members"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-search",children:(0,l.jsx)(o.g,{icon:a.MjD})})]})};var r=i(73216);const d=e=>{let{members:s,toggleList:o}=e;const[a,d]=(0,t.useState)(""),m=(0,r.Zp)(),u=(0,n.gL)("userData");return(0,l.jsx)("div",{className:"chat-section ".concat(o?"":"d-none"),id:"show_user_list",children:(0,l.jsxs)("div",{className:"chat-search-area",children:[(0,l.jsxs)("div",{className:"chat-head-warapper",children:[(0,l.jsxs)("h5",{className:"chat-search-head",children:[s.length," GUESTS IN THE ROOM"]}),(0,l.jsx)("div",{className:"search-area",children:(0,l.jsx)(c,{onSearch:d})})]}),(0,l.jsx)("div",{className:"search-results",children:(0,l.jsxs)("ul",{children:[u&&(0,l.jsxs)("li",{className:"align-items-center d-flex",children:[(0,l.jsx)("div",{className:"user-img cursor-pointer",onClick:()=>m("/publicprofile",{state:u.Member_id}),children:(0,l.jsx)("img",{src:u.members_profile_picture?u.members_profile_picture:i(40518),alt:"Profile Image"})}),(0,l.jsx)("label",{children:"You"})]},u.Member_id),null===s||void 0===s?void 0:s.filter((e=>e.member_fname.toLowerCase().includes(a.toLowerCase())||e.member_lname.toLowerCase().includes(a.toLowerCase()))).map((e=>(0,l.jsxs)("li",{className:"align-items-center d-flex",children:[(0,l.jsx)("div",{className:"user-img cursor-pointer",onClick:()=>m("/publicprofile",{state:e.member_id}),children:(0,l.jsx)("img",{src:e.member_profile_picture?"https://admin.reach.boats/storage/"+e.member_profile_picture:i(40518),alt:"Profile Image"})}),(0,l.jsxs)("label",{children:[e.member_fname," ",e.member_lname]})]},e.member_id)))]})})]})})};var m=i(32916),u=i(5701),g=i(20782),h=i(10591),p=i(48075),x=i(99410),v=i(86213),j=i(4258),_=i(13070);const f=(0,n.gL)("userData"),b="https://admin.reach.boats:4000",N="https://admin.reach.boats/storage/",y=e=>{var s;let{replyAreaHeight:n,showLoader:c,setShowLoader:d,setIsReplyClicked:y,roomId:w,handleSetReplyTo:k,chatAreaBlockRef:A,maxHeight:C}=e;const M=(0,r.Zp)(),{socket:S}=(0,x.Y)(),{showModal:E}=(0,p.Vv)(),R=(0,t.useRef)(null),L=(0,t.useRef)(null),T=(0,t.useRef)({}),[I,H]=(0,t.useState)([]),[B,D]=(0,t.useState)(),[P,Y]=(0,t.useState)(),[U,W]=(0,t.useState)(!0),[O,G]=(0,t.useState)(!1),[V,z]=(0,t.useState)(!1),[F,Q]=(0,t.useState)(),[K,q]=(0,t.useState)(),[J,X]=(0,t.useState)({}),[Z,$]=(0,t.useState)(),[ee,se]=(0,t.useState)(),ie=e=>{E(p.ew.CONFIRM_MODAL,{title:"Delete Message",details:"Are you sure you want to delete message?",confirmBtn:"DeleteMessage",messageId:e,deleteMessage:e=>{var s;s=e,S&&S.emit("deleteMessage",{room_id:w,message_id:s})}}),D(void 0)};(0,t.useEffect)((()=>{R.current&&(R.current.style.maxHeight="".concat(window.innerHeight-300,"px"))}),[]),(0,t.useEffect)((()=>{d(!0),L.current&&(L.current.style.display="none")}),[w]);const ne=e=>{if(R.current){const s=T.current[e];if(s)s.scrollIntoView({behavior:"smooth"});else{null!==S&&void 0!==S&&S.connected&&I.length>0&&U&&(d(!0),G(!0),S.emit("loadRoomMessagesUntilMessageId",{message_id:e,offset:I.length,room_id:w}));let s=setInterval((()=>{const i=T.current[e];i&&(i.scrollIntoView({behavior:"smooth"}),clearInterval(s))}),200)}}},te=()=>{null!==S&&void 0!==S&&S.connected&&S.emit("unpinRoomMessages",{room_id:w})};(0,t.useEffect)((()=>{if(null!==S&&void 0!==S&&S.connected)return null===S||void 0===S||S.emit("joinRoom",{member_id:null===f||void 0===f?void 0:f.Member_id,room_id:w}),S.on("loadRoomMessages",(e=>{d(!1),G(!1),0!=e.length?(W(!0),H((s=>[...e.reverse(),...s].filter(((e,s,i)=>s===i.findIndex((s=>s.message_id==e.message_id)))).sort(((e,s)=>e.message_id-s.message_id)))),ve(e)):W(!1)})),S.on("pinnedRoomMessage",(e=>{Y(e)})),null===S||void 0===S||S.on("pinRoomMessage",(e=>{let s=e.message_id;if(I){let e=I.find((e=>e.message_id===s));Y(e)}})),S.on("unpinRoomMessages",(e=>{let{room_id:s}=e;w==s&&Y(void 0)})),S.on("roomModerator",(e=>{z(e)})),S.on("reaction",(e=>{xe(e.message_id,e)})),S.on("loadReactions",(e=>{e.map((e=>{xe(e.message_id,e)}))})),S.on("removeReaction",(e=>{X((s=>{const i={...s};return i[e.message_id]&&i[e.message_id][e.emoji_id]&&(i[e.message_id][e.emoji_id]=i[e.message_id][e.emoji_id].filter((s=>s.member_id!=e.member_id))),i}))})),S.on("roomMessage",(e=>{H((s=>[...s,e])),setTimeout((()=>{ae()}),100)})),S.on("roomMessages",(e=>{d(!1),0==e.length?W(!1):W(!0),H(e.reverse()),ve(e),setTimeout((()=>{ae()}),200)})),()=>{S.off("loadRoomMessages"),S.off("pinnedRoomMessage"),S.off("unpinRoomMessages"),S.off("roomModerator"),S.off("reaction"),S.off("loadReactions"),S.off("removeReaction"),S.off("roomMessage"),S.off("roomMessages")}}),[S,w]);const oe=(e,s)=>{s&&v.A.post("".concat(b,"/download"),{file:s},{responseType:"blob"}).then((s=>{const i=window.URL.createObjectURL(new Blob([s.data])),n=document.createElement("a");n.href=i,n.setAttribute("download",e),document.body.appendChild(n),n.click(),n.remove()})).catch((e=>{console.error("Error downloading file:",e)}))},ae=()=>{R.current&&(R.current.scrollTo({top:R.current.scrollHeight,behavior:"auto"}),setTimeout((()=>{if(R.current){const{scrollTop:e,clientHeight:s,scrollHeight:i}=R.current;e+s<=i&&R.current.scrollIntoView({behavior:"smooth",block:"center"})}}),600))},le=["jpg","jpeg","png","gif","bmp","webp","svg"],ce=["mp4","mov","avi","wmv","flv","mkv","webm"],re=e=>{let s;if(e.file){var i;const n=null===(i=e.content.split(".").pop())||void 0===i?void 0:i.toLowerCase();n&&(s=le.includes(n)?(0,l.jsx)("div",{className:"upload-img-box cursor-pointer",onClick:()=>se(e),onDoubleClick:()=>oe(e.content,e.file),children:(0,l.jsx)("img",{src:"".concat(b,"/group/file/").concat(e.message_id),alt:"image"})}):ce.includes(n)?(0,l.jsx)("div",{className:"upload-video-box",children:(0,l.jsxs)("video",{width:"100%",controls:!0,children:[(0,l.jsx)("source",{src:"".concat(b,"/group/stream/").concat(e.message_id),type:"video/mp4"}),"Your browser does not support the video tag."]})}):(0,l.jsxs)("div",{className:"d-flex align-items-center",children:[(0,l.jsx)("div",{className:"me-2",children:(0,l.jsx)(o.g,{icon:a.A4h,style:{fontSize:"25px"}})}),(0,l.jsx)("div",{children:e.content})]}))}else e.emoji_replaced||(e.content=de(e.content),e.emoji_replaced=!0),s=(0,l.jsx)("div",{id:"chat_message_div_".concat(e.message_id),className:"chat-input-text",style:{whiteSpace:"pre-line"},dangerouslySetInnerHTML:{__html:e.content}});return(0,l.jsx)("div",{ref:s=>T.current[e.message_id]=s,children:s})},de=e=>_.A.parse(e,{folder:"emoji",ext:".png",base:b+"/"});(0,t.useEffect)((()=>{L.current&&(L.current.style.bottom="".concat(n,"px"),L.current.style.marginTop="-38px")}),[n]);const me=e=>{const s=e.message_id,i=document.getElementById("chat_message_div_".concat(s)),n=document.getElementById("chat_message_button_".concat(s)),t=document.getElementById("edit_".concat(s));if(t&&t.classList.add("d-none"),i){(e=>{const s=e.getElementsByTagName("img");for(let n=s.length-1;n>=0;n--){var i;const e=s[n].alt,t=s[n],o=document.createTextNode(e);null===(i=t.parentNode)||void 0===i||i.replaceChild(o,t)}})(i),i.contentEditable="true",i.focus();const e=document.createRange(),s=window.getSelection();e&&s&&(e.selectNodeContents(i),e.collapse(!1),s.removeAllRanges(),s.addRange(e))}n&&n.classList.remove("d-none")},ue=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const i=document.getElementById("chat_message_div_".concat(e)),n=document.getElementById("chat_message_button_".concat(e)),t=document.getElementById("edit_".concat(e));if(t&&t.classList.remove("d-none"),i){var o;i.contentEditable="false";const n=null!==(o=I.find((s=>s.message_id==e)))&&void 0!==o?o:void 0;n&&(s&&(n.content=null!==s&&void 0!==s?s:n.content),i.innerHTML=n.content)}n&&n.classList.add("d-none")},ge=e=>{const s=e.message_id,i=document.getElementById("chat_message_div_".concat(s));if(i){const e=i.innerText;""!=e.trim()&&(n=s,t=e,null!==S&&void 0!==S&&S.connected&&""!=t.trim()&&S.emit("editMessage",{room_id:w,message_id:n,edited_text:t}),ue(s,de(e)))}var n,t},he=e=>{null!==S&&void 0!==S&&S.connected&&e.emoji&&e.unified&&(S.emit("reaction",{room_id:w,message_id:K,reaction:e.emoji,emoji_id:e.unified}),q(void 0))},pe=e=>{q(K==e?void 0:e)},xe=(e,s)=>{X((i=>{const n={...i};return n[e]||(n[e]={}),n[e][s.emoji_id]||(n[e][s.emoji_id]=[]),n[e][s.emoji_id].find((e=>e.reaction_id==s.reaction_id))||n[e][s.emoji_id].push(s),n}))};(0,t.useEffect)((()=>{const e=e=>{if(K){const s=document.getElementById("emoji_picker_".concat(K)),i=document.getElementById("emoji_picker_btn_".concat(K));s&&i&&!i.contains(e.target)&&!s.contains(e.target)&&q(void 0)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[K]);const ve=e=>{const s=e.map((e=>e.message_id));null!==S&&void 0!==S&&S.connected&&S.emit("loadReactions",s)};document.addEventListener("click",(function(e){const s=e.target;s&&!s.closest(".emoji-reactions")&&$(void 0),s&&!s.closest(".update-emoji")&&Q(void 0)}));let je="";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"pin-message ".concat(P?"":"d-none"),onClick:()=>P&&ne(P.message_id),children:[(0,l.jsx)("span",{className:"close-icon ".concat(V?"":"d-none"),children:(0,l.jsx)(o.g,{icon:a.yYc,onClick:te})}),(0,l.jsxs)("div",{className:"align-items-center d-flex message-block",children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)(o.g,{icon:a.r55})}),(0,l.jsx)("div",{className:"pin-message-text",dangerouslySetInnerHTML:{__html:null!==(s=null===P||void 0===P?void 0:P.content)&&void 0!==s?s:""},style:{whiteSpace:"pre-line"}})]})]}),(0,l.jsxs)("div",{className:"chat-area-block ".concat(P?"top-active":""),ref:A,children:[(0,l.jsx)("div",{className:"chat-laoder ".concat(c?"":"d-none")}),(0,l.jsxs)("div",{className:"container-fluid chat-area-inner",ref:R,onScroll:()=>{if(R.current){const{scrollTop:e,clientHeight:s,scrollHeight:i}=R.current;null!==S&&void 0!==S&&S.connected&&e<=0&&U&&!O&&(d(!0),G(!0),S.emit("loadRoomMessages",{offset:I.length,room_id:w}),R.current.scrollTop=20),L.current&&(L.current.style.display=e+s+200<i?"block":"none")}},children:[0===I.length&&(0,l.jsx)("div",{className:"align-items-center text-center",children:(0,l.jsx)("p",{children:"No messages yet. Start a new conversation!"})}),null===I||void 0===I?void 0:I.map((e=>{var s,n,t;const c=new Date(e.timestamp),r=c.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),d=c.toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}).replace(/ /g," ");return(0,l.jsxs)("div",{id:"message_div_".concat(e.message_id),children:[je!=d&&(je=d)&&(0,l.jsx)("div",{className:"divider",children:(0,l.jsx)("span",{children:d})}),(0,l.jsxs)("div",{className:"chat-part flex-wrap ".concat(e.member_id==(null===f||void 0===f?void 0:f.Member_id)?"chat-reply d-flex":"d-lg-flex d-md-flex"),children:[(0,l.jsxs)("div",{className:e.member_id==(null===f||void 0===f?void 0:f.Member_id)?"d-none":"pro-area-wrapper",children:[(0,l.jsxs)("div",{className:"pro-area",children:[(0,l.jsx)("div",{className:"pro-img cursor-pointer",onClick:()=>M("/publicprofile",{state:e.member_id}),children:(0,l.jsx)("img",{src:e.member_profile_picture?N+e.member_profile_picture:i(40518),alt:"Profile Image"})}),(0,l.jsxs)("label",{children:[e.member_fname," ",e.member_lname]})]}),(0,l.jsx)("span",{className:"time d-lg-none d-md-none",children:r})]}),(0,l.jsxs)("div",{className:"right-area ".concat(e.member_id==(null===f||void 0===f?void 0:f.Member_id)?"order-1 order-md-0 order-lg-0 order-xl-0 order-xxl-0 d-md-flex d-block align-items-start new-updates-rightarea":" "),children:[(0,l.jsxs)("div",{className:"profile-updates d-flex align-items-baseline justify-content-between",children:[(0,l.jsxs)("div",{className:e.member_id==(null===f||void 0===f?void 0:f.Member_id)?"pro-area-wrapper":"d-none",children:[(0,l.jsxs)("div",{className:"pro-area ".concat(e.member_id==(null===f||void 0===f?void 0:f.Member_id)?"order-0 order-md-1 order-lg-1 order-xl-1 order-xxl-1":""),children:[(0,l.jsx)("div",{className:"pro-img cursor-pointer",onClick:()=>M("/publicprofile",{state:e.member_id}),children:(0,l.jsx)("img",{src:e.member_profile_picture?N+e.member_profile_picture:i(40518),alt:"Profile Image"})}),(0,l.jsxs)("label",{children:[e.member_fname," ",e.member_lname]})]}),(0,l.jsx)("span",{className:"time d-lg-none d-md-none",children:r})]}),(0,l.jsx)("div",{className:"action-box-new new-updates",children:(null===f||void 0===f?void 0:f.Member_id)==e.member_id&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[e.file?(0,l.jsx)("div",{id:"download_".concat(e.message_id),className:"action-box icon-box icon-none",onClick:()=>oe(e.content,e.file),children:(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)(o.g,{icon:a.cbP})})}):(0,l.jsx)("div",{id:"edit_".concat(e.message_id),className:"action-box icon-box icon-none",onClick:()=>me(e),children:(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)(o.g,{icon:a.MT7})})}),(0,l.jsx)("div",{className:"action-box icon-box icon-none",onClick:()=>{ie(e.message_id)},children:(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)(o.g,{icon:m.sjs})})})]}),(0,l.jsxs)("div",{className:"reply-newypdates d-md-flex align-items-center d-sm-none justify-content-end flex-md-column ".concat((null===f||void 0===f?void 0:f.Member_id)==e.member_id?"ms-0":"justify-content-end"),children:[(0,l.jsx)("div",{className:"action-box",onClick:()=>{k(e),y(!0)},children:(0,l.jsx)("span",{className:"icon icon-replay",children:(0,l.jsx)(o.g,{icon:a.Eze})})}),(0,l.jsx)("div",{id:"emoji_picker_btn_".concat(e.message_id),className:"action-box icon-box ms-0",onClick:()=>pe(e.message_id),children:(0,l.jsx)("div",{className:"img-block",children:(0,l.jsx)("img",{src:i(57036),alt:"Icons"})})})]})]})})]}),(0,l.jsxs)("div",{className:"chat mx-2 w-100 ".concat((null===P||void 0===P?void 0:P.message_id)==e.message_id?"pin":""),children:[e.reply_of?(0,l.jsxs)("div",{className:"reply-chat",onClick:()=>{e.reply_of&&ne(e.reply_of)},children:[(0,l.jsx)("span",{children:"Replying to:"}),e.reply_of_file&&(0,l.jsxs)("div",{className:"file-download d-flex align-items-center",children:[(0,l.jsx)("span",{className:"upload-icon",children:(0,l.jsx)(o.g,{icon:a.A4h})}),(0,l.jsx)("span",{children:e.reply_of_content})]}),(0,l.jsx)("h5",{children:"".concat(e.reply_of_member_fname," ").concat(e.reply_of_member_lname)}),(0,l.jsx)("div",{className:"chat-replay-text",dangerouslySetInnerHTML:{__html:null!==(s=e.reply_of_content)&&void 0!==s?s:""},style:{whiteSpace:"pre-line"}})]}):"",re(e),(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-end mt-3",children:[V&&(0,l.jsx)("span",{className:"icon-pin ".concat((null===P||void 0===P?void 0:P.message_id)==e.message_id?"pin-active":""),onClick:()=>(e=>{e==P?te():(null!==S&&void 0!==S&&S.connected&&S.emit("pinRoomMessage",{room_id:w,message_id:e.message_id}),Y(e))})(e),children:(0,l.jsx)(o.g,{icon:a.r55})}),(0,l.jsxs)("div",{id:"chat_message_button_".concat(e.message_id),className:"inner-action d-flex flex-fill d-none",children:[(0,l.jsx)("div",{className:"update-emoji me-1",onClick:()=>{return s=e.message_id,void Q((e=>e==s?void 0:s));var s},children:(0,l.jsx)("img",{src:i(57036),alt:"Icons"})}),F==e.message_id&&(0,l.jsx)("div",{id:"edit_reaction_".concat(e.message_id),className:"edit-emoji-actions",children:(0,l.jsx)(j.Ay,{lazyLoadEmojis:!0,skinTonesDisabled:!0,onEmojiClick:s=>((e,s)=>{const i=document.getElementById("chat_message_div_".concat(e));i&&(i.innerText+=s.emoji)})(e.message_id,s)})}),(0,l.jsx)("button",{className:"btn btn-cancel me-1",onClick:()=>ue(e.message_id),children:"Cancel"}),(0,l.jsx)("button",{className:"btn btn-update",onClick:()=>ge(e),children:"Update"})]}),(0,l.jsx)("span",{className:"time flex-md-fill flex-lg-fill d-md-flex d-lg-flex justify-content-start",children:r}),(0,l.jsx)("div",{className:"emoji-reactions-outer d-flex",children:null===(n=Object.keys(null!==(t=J[e.message_id])&&void 0!==t?t:[]))||void 0===n?void 0:n.map((s=>{var n,t,o;return J[e.message_id][s].length>0&&(0,l.jsxs)("div",{className:"emoji-reactions d-flex cursor-pointer",onClick:()=>(e=>{$(Z?void 0:e[0].reaction_id)})(J[e.message_id][s]),children:[(0,l.jsx)("span",{children:(0,l.jsx)("img",{style:{width:"18px"},alt:null!==(n=null===(t=J[e.message_id][s][0])||void 0===t?void 0:t.reaction)&&void 0!==n?n:"emoji",draggable:"false",src:"".concat(b,"/emoji/").concat(null===(o=J[e.message_id][s][0])||void 0===o?void 0:o.emoji_id,".png")})}),(0,l.jsx)("label",{className:"ms-2",children:J[e.message_id][s].length}),Z==J[e.message_id][s][0].reaction_id&&(0,l.jsx)("div",{className:"list-wrapper",children:(0,l.jsx)("div",{className:"list-area",children:(0,l.jsx)("ul",{children:J[e.message_id][s].map((e=>(0,l.jsxs)("li",{className:"align-items-center d-flex",children:[(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:e.member_profile_picture?N+e.member_profile_picture:i(40518),alt:"Member Pic"})}),(0,l.jsx)("label",{children:(null===f||void 0===f?void 0:f.Member_id)==e.member_id?"You":"".concat(e.member_fname," ").concat(e.member_lname)})]},e.member_id)))})})})]},s)}))})]})]}),(0,l.jsxs)("div",{className:"action-area ms-2 d-flex align-items-end justify-content-end flex-md-column  ".concat((null===f||void 0===f?void 0:f.Member_id)==e.member_id?"ms-0":"justify-content-end"),children:[(0,l.jsxs)("div",{className:"action-box me-0",onClick:()=>{k(e),y(!0)},children:[(0,l.jsx)("span",{className:"icon icon-replay",children:(0,l.jsx)(o.g,{icon:a.Eze})}),(0,l.jsx)("label",{children:"Reply"})]}),(0,l.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[e.file&&(0,l.jsx)("div",{id:"emoji_picker_btn_".concat(e.message_id),className:"action-box icon-box ms-2 me-1",onClick:()=>oe(e.content,e.file),children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:(0,l.jsx)("span",{className:"icon icon-replay me-0 ",children:(0,l.jsx)(o.g,{icon:a.cbP})})})}),(0,l.jsx)("div",{id:"emoji_picker_btn_".concat(e.message_id),className:"download-action action-box icon-box ms-0",onClick:()=>pe(e.message_id),children:(0,l.jsx)("div",{className:"img-block",children:(0,l.jsx)("img",{src:i(57036),alt:"Icons"})})})]}),(null===f||void 0===f?void 0:f.Member_id)==e.member_id&&(0,l.jsx)("div",{className:"action-box d-lg-none d-md-none icon-box",id:"action",onClick:()=>D(e),children:(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)(o.g,{icon:a.Dwc})})})]}),(0,l.jsx)("div",{className:"e-picker-wrap",children:(0,l.jsx)("div",{id:"emoji_picker_".concat(e.message_id),className:K==e.message_id?"":"d-none",children:(0,l.jsx)("div",{className:e.member_id==(null===f||void 0===f?void 0:f.Member_id)?"d-flex justify-content-end d-md-flex e-picker justify-content-md-start mt-2":"e-picker mt-2 d-flex justify-content-end",children:K==e.message_id&&(0,l.jsx)(j.Ay,{lazyLoadEmojis:!1,allowExpandReactions:!1,reactionsDefaultOpen:!0,onReactionClick:he})})})})]})]})]},e.message_id)}))]}),(0,l.jsxs)("div",{ref:L,onClick:ae,className:"backtobottom cursor-pointer",style:{display:"none"},children:[(0,l.jsx)("span",{children:(0,l.jsx)(o.g,{icon:a.ejj})})," Scroll to Bottom"]}),(0,l.jsx)(u.A,{isOpen:!!B,toggle:()=>D(void 0),centered:!0,className:"action-modal-container",children:(0,l.jsxs)(g.A,{children:[(0,l.jsx)(h.A,{}),(0,l.jsxs)("div",{className:"action-modal",children:[(0,l.jsx)("h5",{children:"My Post"}),!(null!==B&&void 0!==B&&B.file)&&(0,l.jsxs)("a",{onClick:()=>{B&&(me(B),D(void 0))},children:[(0,l.jsx)("span",{children:(0,l.jsx)(o.g,{icon:a.MT7})}),"Edit Post"]}),(0,l.jsxs)("a",{onClick:()=>{B&&ie(B.message_id)},children:[(0,l.jsx)("span",{children:(0,l.jsx)(o.g,{icon:m.sjs})}),"Delete Post"]})]})]})})]}),(0,l.jsx)("div",{children:ee&&(0,l.jsx)(u.A,{isOpen:!0,centered:!0,className:"chat-viewModal",children:(0,l.jsxs)(g.A,{children:[(0,l.jsx)(h.A,{toggle:()=>se(void 0),children:(0,l.jsx)("div",{className:"me-2 cursor-pointer",onClick:()=>oe(ee.content,ee.file),children:(0,l.jsx)(o.g,{icon:a.cbP,style:{fontSize:"25px"}})})}),(0,l.jsx)("div",{className:"action-modal",children:(0,l.jsx)("img",{src:"".concat(b,"/group/file/").concat(ee.message_id),alt:"image",className:"modal-image w-100 img-fluid"})})]})})})]})};var w=i(43081);const k=e=>{const s=e.rooms,i=e.members,n=e.handleshowUsers,o=(0,r.Zp)(),a=(0,t.useRef)(null);(0,t.useEffect)((()=>{var e,s;const i=document.querySelector(".chat-slider-active");var n,t=null===i||void 0===i||null===(e=i.parentElement)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.dataset.index,o=document.querySelectorAll(".slick-slide").length;i&&a.current&&(null===(n=a.current)||void 0===n||n.slickGoTo(o-6<t?o-6:t));var l;window.matchMedia("(max-width:767px)").matches&&i&&a.current&&(null===(l=a.current)||void 0===l||l.slickGoTo(o-4<t?o-4:t))}),[s]);const c=(e=>(e.map((e=>(e.room_name=e.room_name.split(" ").map((e=>e.trim().charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "),e))),e))(s).map((s=>({image:"https://admin.reach.boats/storage/"+s.room_image,alt:"Club Image",title:s.room_name,active:s.room_id==e.roomId,url:window.location.origin+"/group-chat/"+s.room_id,isLink:!0,room_id:s.room_id}))),d=s.length<4?"slick-slider-wrapper few-items":"slick-slider-wrapper";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:s.length>0?"chat-slider-block":"d-none",children:(0,l.jsx)("div",{className:"container-fluid inner-slider-block",children:(0,l.jsx)("div",{className:"chat-slider ".concat(d),children:(0,l.jsx)(w.f,{clickCallback:e=>{o("/group-chat/"+e)},settings:{dots:!1,infinite:!1,slidesToShow:6,slidesToScroll:1,draggable:!1,variableWidth:!1,centerPadding:"0",responsive:[{breakpoint:1200,settings:{arrows:!1,centerPadding:"0px",slidesToShow:4,variableWidth:!0}},{breakpoint:992,settings:{arrows:!1,centerPadding:"0px",slidesToShow:4,variableWidth:!0}},{breakpoint:640,settings:{arrows:!1,centerPadding:"0",slidesToShow:4,variableWidth:!0}},{breakpoint:480,settings:{arrows:!1,centerPadding:"0",slidesToShow:3,variableWidth:!0}}]},items:c,ref:a})})})}),(0,l.jsx)("div",{className:"room-container d-lg-none d-md-none",id:"show_users",onClick:n,children:(0,l.jsxs)("h5",{className:"chat-search-head",children:[i.length," GUESTS IN THE ROOM"]})})]})},A=e=>{var s;let{setReplyAreaHeight:c,setShowLoader:r,setIsReplyClicked:d,isReplyClicked:m,roomId:u,sendTextMessage:g,setReplyTo:h,replyTo:p,replyAreaRef:v}=e;const{socket:_,isConnected:f}=(0,x.Y)(),b=(0,n.gL)("userData"),[N,y]=(0,t.useState)(!1),w=(0,t.useRef)(null),k=()=>{if(R.current){const e=R.current.innerText;""!=e&&(g(e),R.current.innerHTML="")}},[A,C]=(0,t.useState)();let M;(0,t.useEffect)((()=>{null!==_&&void 0!==_&&_.connected&&(_.on("roomTyping",(e=>{(null===b||void 0===b?void 0:b.Member_id)!=e.member_id&&C(e)})),_.on("stopRoomTyping",(e=>{C(void 0)})))}),[f,b]);(0,t.useEffect)((()=>{R.current&&R.current.focus()}),[m]),(0,t.useEffect)((()=>{R.current&&(R.current.innerHTML="",R.current.focus())}),[u]);const S=(0,t.useRef)(null),E=(0,t.useRef)(null);document.addEventListener("mousedown",(e=>{S.current&&!S.current.contains(e.target)&&y(!1)}));const R=(0,t.useRef)(null);return(0,t.useEffect)((()=>{v.current&&c(v.current.clientHeight)}),[]),(0,l.jsxs)("div",{className:"replay-area",ref:v,children:[(0,l.jsx)("div",{className:"typping-msg mb-2",children:A?"".concat(A.member_fname," ").concat(A.member_lname," is typing..."):""}),(0,l.jsxs)("div",{className:"replay-box",children:[(0,l.jsxs)("div",{className:p?"reply-chat":"d-none",children:[(0,l.jsx)("span",{className:"close-button",onClick:()=>{h(void 0),d((e=>!e))},children:(0,l.jsx)("a",{children:(0,l.jsx)(o.g,{icon:a.yYc})})}),(0,l.jsx)("span",{children:"Replying to:"}),(0,l.jsxs)("h5",{children:[null===p||void 0===p?void 0:p.reply_of_member_fname," ",null===p||void 0===p?void 0:p.reply_of_member_lname]}),(0,l.jsx)("div",{className:"input-reply-chat",dangerouslySetInnerHTML:{__html:null!==(s=null===p||void 0===p?void 0:p.reply_of_content)&&void 0!==s?s:""}})]}),(0,l.jsx)("div",{ref:R,className:"input-reply-area",contentEditable:!0,onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||(e.preventDefault(),k())),clearTimeout(M),null!==_&&void 0!==_&&_.connected&&_.emit("roomTyping",{room_id:u})},onKeyUp:()=>{clearTimeout(M),M=setTimeout((()=>{null!==_&&void 0!==_&&_.connected&&_.emit("stopRoomTyping",{room_id:u})}),500)}}),(0,l.jsxs)("div",{className:"replay-action d-flex align-items-center justify-content-between",children:[(0,l.jsxs)("div",{className:"left-blok d-flex",children:[(0,l.jsx)("div",{className:"upload-file cursor-pointer",children:(0,l.jsxs)("div",{className:"align-items-center d-flex",children:[(0,l.jsx)("input",{ref:w,type:"file",id:"file_input",accept:"image/*,video/*,.pdf,.doc,.docx,.txt,.ppt,.xls,.csv",onClick:()=>{w.current&&(w.current.value="")},multiple:!0,onChange:e=>{if(r(!0),null!==_&&void 0!==_&&_.connected){const s=e.target.files;if(s&&s.length>0){const e=[];Array.from(s).forEach((i=>{const n=new FileReader;n.onload=()=>{e.push({file_data:n.result,original_name:i.name}),e.length===s.length&&_.emit("roomFiles",{filesData:e,data:{room_id:u,reply_of:p||null}})},h(void 0),n.readAsArrayBuffer(i)}))}}}}),(0,l.jsx)("span",{children:(0,l.jsx)(o.g,{icon:a.QLR})}),(0,l.jsx)("label",{htmlFor:"file_input",children:"Upload Image"})]})}),(0,l.jsxs)("div",{className:"action-outer",children:[(0,l.jsx)("div",{className:"action-smile",onClick:()=>{if(E.current&&S.current){E.current.getBoundingClientRect().bottom+300>window.innerHeight?(S.current.style.bottom="35px",S.current.style.top="inherit"):(S.current.style.bottom="inherit",S.current.style.top="35px")}y(!0)},ref:E,children:(0,l.jsx)("img",{src:i(57036),alt:"Emoji"})}),(0,l.jsx)("div",{className:N?"smile-outer":"d-none",ref:S,children:(0,l.jsx)("div",{className:"emojipicker-wrapper",children:(0,l.jsx)(j.Ay,{skinTonesDisabled:!0,lazyLoadEmojis:!1,onEmojiClick:e=>{const s=e.emoji;R.current&&(R.current.innerHTML=R.current.innerHTML+s)}})})})]})]}),(0,l.jsx)("div",{className:"right-block",children:(0,l.jsxs)("button",{className:"btn btn-action-send",onClick:k,children:["Send",(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("img",{src:i(50199),alt:"Send"})})]})})]})]})]})},C=(0,n.gL)("userData"),M=()=>{const{roomId:e}=(0,r.g)(),s=Number(e),[i,n]=(0,t.useState)([]),[o,a]=(0,t.useState)([]),[c,m]=(0,t.useState)([]),{socket:u,isConnected:g}=(0,x.Y)(),[h,v]=(0,t.useState)(),[j,_]=(0,t.useState)(!1),f=(0,t.useRef)(null),b=(0,t.useRef)(null),[N,w]=(0,t.useState)(0),[M,S]=(0,t.useState)(0);(0,t.useEffect)((()=>{b.current&&(b.current.style.paddingBottom="".concat(N,"px"))}),[N]),(0,t.useEffect)((()=>{v(void 0)}),[s]);const[E,R]=(0,t.useState)(0);(0,t.useEffect)((()=>{f.current&&w(f.current.clientHeight);const e=()=>{const e=window.innerHeight;S(e-300)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,t.useEffect)((()=>null!==u&&void 0!==u&&u.connected?(u.on("rooms",(e=>{m(e)})),u.on("roomMembers",(e=>{n(e.filter((e=>e.member_id!=(null===C||void 0===C?void 0:C.Member_id))))})),()=>{u.off("rooms"),u.off("roomMembers")}):(m([]),a([]),void n([]))),[g]);const[L,T]=(0,t.useState)(!(window.innerWidth<767)),I=()=>{window.innerWidth<767&&T(!L)};(0,t.useEffect)((()=>{let s;var i;window.location.pathname==="/group-chat/".concat(e)?window.innerWidth<767&&(L?(document.body.classList.add("blur-bg"),s=document.createElement("div"),s.className="overlay",document.body.insertAdjacentElement("afterbegin",s),null===(i=s)||void 0===i||i.addEventListener("click",I)):(document.body.classList.remove("blur-bg"),s=document.querySelector(".overlay"),s&&s.remove())):(s=document.querySelector(".overlay"),s&&s.remove())}),[L]),(0,t.useEffect)((()=>{window.scrollTo(0,0)}),[]);const[H,B]=(0,t.useState)(!1),{showModal:D}=(0,p.Vv)();return(0,t.useEffect)((()=>{(null===C||void 0===C?void 0:C.Member_type)||D(p.ew.MEMBERSHIP_MODAL)}),[]),(0,l.jsx)("div",{className:"chat-container",children:(0,l.jsx)("div",{className:"container-fluid",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)(d,{toggleList:L,members:i}),(0,l.jsx)("div",{className:"chat-block-wrapper",children:(0,l.jsxs)("div",{className:"chat-block",children:[(0,l.jsx)(k,{setShowLoader:_,messages:o,setMessages:a,roomId:String(s),rooms:c,members:i,handleshowUsers:I}),(0,l.jsxs)("div",{className:"chat-section-wrap",children:[(0,l.jsx)(y,{replyAreaHeight:E,showLoader:j,setShowLoader:_,setIsReplyClicked:B,roomId:s,setMessages:a,maxHeight:M,chatAreaBlockRef:b,messages:o,deleteMessage:e=>{u&&u.emit("deleteMessage",{room_id:s,message_id:e})},handleSetReplyTo:e=>{const s={reply_of_message_id:e.message_id,reply_of_member_id:e.member_id,reply_of_member_fname:e.member_fname,reply_of_member_lname:e.member_lname,reply_of_content:e.content,reply_of_file:e.file};v(s)}}),(0,l.jsx)(A,{setReplyAreaHeight:R,setShowLoader:_,setIsReplyClicked:B,isReplyClicked:H,roomId:s,replyAreaRef:f,sendTextMessage:e=>{(e=e.replace(/\n+$/,"").trim())&&u&&(u.emit("roomMessage",{room_id:s,message:e,reply_of:h}),v(void 0))},replyTo:h,setReplyTo:v})]})]})})]})})})}},50199:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGxSURBVHgB1VXdUcJAEP42Is+WEDuACoQKwAqUCsRBHN8Y3hzEGTqQVCBWAFQAVgBWIL6icH4LYciECwk/L+xMLnd7d/vdfrt7B5y6yKpjUL4A0jlg2hO0JjiSBACeXGA28tUdaj6A386hYBIcGDwMAKfOHr1Bgf+cD+YJmj3sIU5ozFPPM4KXNr9rIJWlrs9lbwbVAb9bHCL0IGfwOLDPVYqc7xJktAuQWEC+2dKL1y87UDXDtsytVxzW1VvsBlBpUT0m561tG9VbpU57TIY8k2FsW+dYMBlUKSBGNOiCxiW7TIq0Usc4ld0EAH9DpWhZF/GypMjJMzl+gPNuOD5i28RF78up+WeE3YmNwjVtYP007lWXQqSYPQtMY7I+eASAFlgqK3geI5HJxTVTY7dIr0vBonQ2F6ubGCY3rpyfs3YMTz3Nhive4oHcsPEQa1gPIjWfklLUVWKjiBvP6og1LC5HLLRmG1skZdk8sdGzabjRRgIJeWAYJNNfG10E787Xa1Z5SQ2vZNt1rbHIYBEP09n3ug6+aC6zYaT3EFONn3jHeHCCFNHQnG/A7KhP5unLP+P6pzthejE0AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=1015.28f735b8.chunk.js.map