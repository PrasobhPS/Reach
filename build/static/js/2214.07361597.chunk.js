"use strict";(self.webpackChunkreach=self.webpackChunkreach||[]).push([[2214],{52214:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var o=a(65043),n=a(73216),s=a(70579);const c=()=>{const[e,t]=(0,o.useState)(!1),[a,c]=(0,o.useState)({lat:null,lng:null}),[i,l]=(0,o.useState)(""),[r,d]=(0,o.useState)(!1),[u,m]=(0,o.useState)(null),[h,w]=(0,o.useState)(null),[p,b]=(0,o.useState)(""),g=(e,t)=>{const a={key:"Emv4UOlkc3c1xZammChgPejw9Na4szAv",lat:e,lon:t,zoom:6,verbose:!0};window.windyInit(a,(a=>{const{map:o,picker:n,utils:s,store:c,broadcast:i}=a;o.setView([e,t],7),m(o),c.set("timestamp",Date.now()/1e3),c.set("product","ecmwf"),c.on("timestamp",(e=>{b(new Date(1e3*e).toLocaleTimeString())})),o.on("click",(async e=>{const{lat:t,lng:a}=e.latlng;n.open({lat:t,lon:a}),n.on("pickerOpened",(e=>{let{lat:t,lng:a,values:o}=e;s.wind2obj(o)}))})),i.on("timestamp",(e=>{b(new Date(1e3*e).toLocaleTimeString())}))}))};(0,o.useEffect)((()=>{if(!r){const e=document.createElement("script");e.src="https://api.windy.com/assets/map-forecast/libBoot.js",e.async=!0,e.onload=()=>{navigator.geolocation.getCurrentPosition((e=>{const t=e.coords.latitude,a=e.coords.longitude;c({lat:t,lng:a}),g(t,a)}),(e=>{switch(console.error("Geolocation error:",e.message||"No message provided."),e.code){case e.PERMISSION_DENIED:l("Location access denied by the user.");break;case e.POSITION_UNAVAILABLE:l("Location information is unavailable. Using fallback...");break;case e.TIMEOUT:l("The request to get user location timed out. Using fallback...");break;default:l("An unknown error occurred. Using fallback...")}(async()=>{try{const e=await fetch("https://ipapi.co/json/");if(!e.ok)throw new Error("Failed to fetch IP location.");const t=await e.json(),{latitude:a,longitude:o}=t;c({lat:a,lng:o}),g(a,o)}catch(e){console.error("Fallback failed:",e),l("Unable to retrieve location. Please check your connection.")}})()}),{enableHighAccuracy:!0,timeout:2e4,maximumAge:0}),d(!0)},e.onerror=()=>{l("Failed to load Windy API")},document.head.appendChild(e)}}),[r]);const f=(0,n.zy)();return(0,o.useEffect)((()=>("/weather"===f.pathname?document.body.classList.add("weatherbody"):document.body.classList.remove("weatherbody"),()=>{document.body.classList.remove("weatherbody")})),[f.pathname]),(0,s.jsx)("div",{className:"weatherparent ".concat(e?"weather-class":""),children:(0,s.jsx)("div",{className:"container-fluid",children:(0,s.jsx)("div",{id:"windy",className:"weather-section",style:{width:"100%",height:"100%"}})})})},i=()=>(0,s.jsx)("div",{children:(0,s.jsx)(c,{})})}}]);
//# sourceMappingURL=2214.07361597.chunk.js.map